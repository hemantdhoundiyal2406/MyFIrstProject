<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Smooth Sidebar Toggle</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

  <script src="https://cdn.tiny.cloud/1/qt8g96br5j8q9m8eqi2a1kjn1e5xyx1f2s4y54epk15h634j/tinymce/5/tinymce.min.js"
  referrerpolicy="origin"></script>

  <style>
    body {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }

    .sidebar {
      width: 20%;
      transition: all 0.6s ease;
      height: 100vh;
    }

    .sidebar.hide {
      width: 0;
      opacity: 0;
      overflow: hidden;
    }

    .main-content {
      width: 75%;
      transition: all 0.6s ease;
    }

    .main-content.full {
      width: 100%;
    }

    .content-wrapper {
      display: flex;
      transition: all 0.6s ease;
    }

    li {
      list-style: none;
    }
    .logo{
      background: #020024;
background: linear-gradient(182deg, rgba(2, 0, 36, 1) 0%, rgba(9, 9, 121, 1) 35%, rgba(0, 212, 255, 1) 100%);
    }
  </style>
</head>
<body>

 
  <!-- Layout Container -->
  <div class="content-wrapper">
    <!-- Sidebar -->
    <div class="sidebar bg-light position-sticky top-0 vh-100" id="sidebar">
      <div class="text-center logo p-3 mb-3">
        <img src="https://host1-ms.hq.beardon.com/wp-content/uploads/sites/36/2021/07/city-logo-removebg-preview.png" class="img-fluid" width="100" alt="Logo">
      </div>
      <div class="d-flex flex-column gap-4 align-items-center">
        <a href="/dashboard" class="nav-link fs-6 w-75 py-3 border-danger border-2 px-4 border-bottom rounded">
          <i class="bi bi-speedometer2 me-2"></i> Dashboard
        </a>

              <div class="dropdown w-75">
          <button class="nav-link fs-6 py-3 border-danger border-2 px-4 border-bottom rounded dropdown-toggle w-100 text-start"
            type="button" data-bs-toggle="collapse" data-bs-target="#DestinationsDropdown" aria-expanded="false" aria-controls="DestinationsDropdown">
            <i class="bi bi-journal-text me-2"></i> Destinations 
          </button>
          <div class="collapse" id="DestinationsDropdown">
            <ul class="list-group gap-1">
              <li><a class="list-group-item" href="/all-destinations">All Destinations </a></li>
              <li><a class="list-group-item" href="/add-destinations ">Add Destinations </a></li>
            </ul>
          </div>
        </div>

        <div class="dropdown w-75">
          <button class="nav-link fs-6 py-3 border-danger border-2 px-4 border-bottom rounded dropdown-toggle w-100 text-start"
            type="button" data-bs-toggle="collapse" data-bs-target="#blogDropdown" aria-expanded="false" aria-controls="blogDropdown">
            <i class="bi bi-journal-text me-2"></i> Blogs
          </button>
          <div class="collapse" id="blogDropdown">
            <ul class="list-group gap-1">
              <li><a class="list-group-item" href="/all-post">All Blogs</a></li>
              <li><a class="list-group-item" href="/add-post">Add Blog</a></li>
            </ul>
          </div>
        </div>

        <div class="dropdown w-75">
          <button class="nav-link fs-6 py-3 border-danger border-2 px-4 border-bottom rounded dropdown-toggle w-100 text-start"
            type="button" data-bs-toggle="collapse" data-bs-target="#blogDropdown1" aria-expanded="false" aria-controls="blogDropdown">
            <i class="bi bi-journal-text me-2"></i> Articles
          </button>
          <div class="collapse" id="blogDropdown1">
            <ul class="list-group gap-1">
              <li><a class="list-group-item" href="/add-article">All Article</a></li>
              <li><a class="list-group-item" href="/add-article">Add Article</a></li>
            </ul>
          </div>
        </div>

        <a href="/add-banner" class="nav-link fs-6 w-75 py-3 border-danger border-2 px-4 border-bottom rounded">
          <i class="bi bi-speedometer2 me-2"></i> Add Header Banner
        </a>
        <a href="/edit-banner" class="nav-link fs-6 w-75 py-3 border-danger border-2 px-4 border-bottom rounded">
          <i class="bi bi-speedometer2 me-2"></i>Edit Header Banner
        </a>

        <a href="/logout" class="nav-link fs-6 w-75 py-3 border-danger border-2 px-4 border-bottom rounded text-danger">
          <i class="bi bi-box-arrow-right me-2"></i> Logout
        </a>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content p-3" id="mainContent">

      <nav class="navbar navbar-expand-lg navbar-light bg-light px-5 rounded-5 py-0 position-sticky  " style="top: 2px;">
        <!-- Toggle Button -->
   <button class="btn btn-primary m-3 px-3" id="toggleSidebar">
     <i class="bi bi-list"></i> 
   </button>


       
         <!-- Right side: Profile & Logout -->
         <div class="d-flex align-items-center ms-auto">
           <a href="#" class="btn btn-outline-secondary me-2">
             <i class="bi bi-person-circle"></i>
           </a>
           <button class="btn btn-danger">
             <i class="bi bi-box-arrow-right"></i> Logout
           </button>
         </div>
       </nav>
       <div class="container my-5">
        <h2 class="mb-4 text-center">View / Edit Post </h2>
      
        <form action="/edit-post/<%= data._id %>?_method=PUT" method="POST" enctype="multipart/form-data">
          <div class="mb-3 ">
            <div class="d-flex flex-column border p-3 gap-2 rounded" style="width: fit-content;">
              <label for="image" class="form-label text-center">Post Image</label>
              <% if (data.image) { %>
                <img src="/uploads/<%= data.image %>" width="150" class="mb-2">
                <% } %>
            </div>
            <input class="form-control mt-3" type="file" id="image" name="image">
          </div>
      
          <div class="mb-3" id="editor-container">
            <label for="title" class="form-label">Post Title</label>
            <input class="form-control" type="text" id="title" value="<%= data.title %>" name="title"
              placeholder="Enter title" required>
          </div>
      
      
          <div class="mb-3">
      
            <label for="body" class="form-label">Description</label>
            <!-- âœ… FIX: This renders HTML as actual content inside the TinyMCE editor -->
            <textarea id="mytextarea" class="form-control" name="body" rows="5" placeholder="Write something..."
              required><%- data.body %></textarea>
          </div>
      
          <div class="mb-3 ">
            <div class="d-flex flex-column border p-3 gap-2 rounded" style="width: fit-content;">
              <label for="bannerImage" class="form-label ">Single Image</label>
      
              <img src="/uploads/<%= data.bannerImage %>" width="200" height="200" class="mb-2">
      
            </div>
            <input class="form-control mt-3" type="file" id="bannerImage" name="bannerImage">
          </div>
          <button type="submit" class="btn btn-primary">Update Post</button>
        </form>
      
      </div>
      
      
    </div>
  </div>


  <script>
    document.addEventListener('DOMContentLoaded', function () {
      tinymce.init({
        selector: '#mytextarea',
        plugins: 'preview importcss searchreplace autolink autosave save directionality code visualblocks visualchars fullscreen image link media template codesample table charmap hr pagebreak nonbreaking anchor insertdatetime advlist lists wordcount help charmap quickbars emoticons',
        toolbar: `undo redo | styleselect | bold italic underline strikethrough | 
                    alignleft aligncenter alignright alignjustify | 
                    bullist numlist outdent indent | link image media | 
                    forecolor backcolor | table | code fullscreen preview`,
        menubar: 'file edit view insert format tools table help',
        height: 400,
        setup: function (editor) {
          editor.on('init', function () {
            // this makes sure the initial content is loaded correctly
            editor.setContent(document.getElementById('mytextarea').value);
          });
        },
        file_picker_types: 'image',
        file_picker_callback: function (cb, value, meta) {
          const input = document.createElement('input');
          input.setAttribute('type', 'file');
          input.setAttribute('accept', 'image/*');
          input.onchange = function () {
            const file = this.files[0];
            const reader = new FileReader();
            reader.onload = function () {
              const id = 'blobid' + (new Date()).getTime();
              const blobCache = tinymce.activeEditor.editorUpload.blobCache;
              const base64 = reader.result.split(',')[1];
              const blobInfo = blobCache.create(id, file, base64);
              blobCache.add(blobInfo);
              cb(blobInfo.blobUri(), { title: file.name });
            };
            reader.readAsDataURL(file);
          };
          input.click();
        }
      });
    });
  </script>
  

  <!-- Toggle Logic -->
  <script>
    const toggleBtn = document.getElementById("toggleSidebar");
    const sidebar = document.getElementById("sidebar");
    const main = document.getElementById("mainContent");

    toggleBtn.addEventListener("click", () => {
      sidebar.classList.toggle("hide");
      main.classList.toggle("full");
    });
  </script>

</body>
</html>
